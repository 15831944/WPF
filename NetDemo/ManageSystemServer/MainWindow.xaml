<Window x:Class="ManageSystemServer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        Title="MainWindow"  Height="600" Width="800"
        DataContext="{StaticResource MainWindowViewModelKey}"
        >
    <Window.InputBindings>
        <KeyBinding Key="F4" Modifiers="Alt"  Command="{Binding ExitCommand}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"/>
    </Window.InputBindings>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Closed">
            <i:InvokeCommandAction Command="{Binding ExitCommand}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Canvas Background="Gray" >
        <ContentControl Canvas.Left="10" Canvas.Top="10" Width="18" Height="18" >
            <ContentControl.Template>
                <ControlTemplate TargetType="{x:Type ContentControl}">
                    <Ellipse x:Name="rect" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" Fill="Red"/>
                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding Path=bOnline}" Value="True">
                            <Setter Property="Fill" TargetName="rect" Value="Green"/>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </ContentControl.Template>
        </ContentControl>
        <TextBlock Canvas.Left="50" Canvas.Top="12" HorizontalAlignment="Right" VerticalAlignment="Center">当前连接数量:</TextBlock>
        <TextBlock  Canvas.Left="139" Canvas.Top="12"  HorizontalAlignment="Left" VerticalAlignment="Center" Text="{Binding Path=curConnections}"></TextBlock>
        <TextBlock Canvas.Left="50" Canvas.Top="70" HorizontalAlignment="Right" VerticalAlignment="Center">BindPort:</TextBlock>
        <TextBox x:Name="bindPortBox" Canvas.Left="120" Canvas.Top="70"  HorizontalAlignment="Left" VerticalAlignment="Center">60000</TextBox>
        <Button Canvas.Left="170" Canvas.Top="64" Width="100" Height="30" Name="butStartServer" Content="butStartServer" Command="{Binding Path=StartServerCommand}" />
        <Button Canvas.Left="290" Canvas.Top="63" Width="100" Height="30" Name="butStopServer"  Content="butStopServer" Command="{Binding Path=StopServerCommand}"/>
    </Canvas>
</Window>
